"0",""
"0","# Calculate the products price per order"
"0",""
"0","shipments_aux <- shipments %>%"
"0","  separate_rows(packages) %>% "
"0","  filter(!packages %in% c('oid', ':', '')) # Unnest and create one row per package"
"0",""
"0","packages_aux <- packages %>% "
"0","  separate_rows(products) %>%"
"0","  filter(!products %in% c('oid', ':', '')) # Unnest and create on row per product"
"0",""
"0","shipments_aux %>%"
"0","  inner_join(packages_aux, by = c('packages' = 'X_id')) %>%"
"0","  inner_join(products, by = c('products' = 'X_id')) %>%"
"0","  filter(!is.na(price),"
"0","         price > 0) %>% # remove products without price and that presents price equals to 0"
"0","  group_by(X_id) %>%"
"0","  summarise(total_price = sum(price)) %>%"
"0","  plot_ly(y = ~total_price, type = 'box') %>%"
"0","  layout(yaxis = list(title = 'Price per Shipment'),"
"0","         xaxis = list(title = '',"
"0","                      showgrid = FALSE, "
"0","                      zeroline = FALSE, "
"0","                      showticklabels = FALSE),"
"0","         title = 'Products Price per order')"
